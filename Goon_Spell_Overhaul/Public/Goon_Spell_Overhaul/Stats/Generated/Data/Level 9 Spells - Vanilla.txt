

// ==================================== Karsus' Compulsion ====================================
// Bug Fix: Now works with more non-hostile and non-spellcasting restricted Polymorphs.

new entry "Target_END_Mindflayer_CrownDomination"
type "SpellData"
data "SpellType" "Target"
// using "Target_DominatePerson_Mindflayer"
using "Target_END_Mindflayer_CrownDomination"
// data "Level" "9"
// data "SpellSchool" "Enchantment"
// data "AIFlags" "CanNotUse"
// data "SpellProperties" "ApplyStatus(SELF,END_KARSUSCOMPULSION_CHANNEL, 100, -1);ApplyStatus(END_KARSUSCOMPULSION_CHANNEL_TARGET, 100, -1)"
// data "TargetRadius" "6"
// data "RequirementConditions" "not HasStatus('END_KARSUSCOMPULSION_CHANNEL') and not HasStatus('SG_Polymorph')"
data "RequirementConditions" "not HasStatus('END_KARSUSCOMPULSION_CHANNEL') and (not HasStatus('SG_Polymorph') or Goon_IsUnrestrictedPolymorphStatus())"
// data "SpellRoll" ""
// data "SpellSuccess" ""
// data "TargetConditions" "Tagged('END_CROWN_OF_KARSUS')"
// data "Icon" "Action_KarsusCompulsion"
// Karsus' Compulsion
// data "DisplayName" "h0a14e756gcbf4g4dc7g8127g4b3e7a4665b5;2"
// Channel the stones' magic to control the Crown of Karsus and dominate the Netherbrain. <br><br>The caster must <LSTag Type="Status" Tooltip="END_KARSUSCOMPULSION_CHANNEL
// data "Description" "h162c4af0gdb19g4b3egb610g3bda5066defd;12"
// data "DescriptionParams" ""
// data "ExtraDescription" ""
// data "ExtraDescriptionParams" ""
// data "ShortDescription" ""
// data "ShortDescriptionParams" ""
// data "TooltipDamageList" ""
// data "TooltipAttackSave" ""
// data "TooltipStatusApply" "ApplyStatus(END_KARSUSCOMPULSION_CHANNEL,100,-1)"
// data "TooltipOnMiss" ""
// data "TooltipOnSave" ""
// data "TooltipUpcastDescription" ""
// data "TooltipUpcastDescriptionParams" ""
// data "TooltipPermanentWarnings" "6008b2c2-36bf-4bb3-821c-c64c29e64075"
// data "PrepareSound" "CrSpell_Prepare_Control_DominatePerson_L1to3"
// data "PrepareLoopSound" "CrSpell_Loop_Control_DominatePerson_L1to3"
// data "CastSound" "CrSpell_Cast_Control_DominatePerson_L1to3"
// data "SpellStyleGroup" "Intent"
// data "SpellFlags" "IsHarmful;Temporary;Wildshape;IsSpell"
// data "RechargeValues" ""
// data "PrepareEffect" "54d12e90-23ce-4f2b-af51-c50be6e9c6a9"
// data "CastEffect" "2cc72eb7-b8bf-4f53-8a05-23c55fa5b6ff"
// data "HitEffect" ""